<div *ngIf="association" class="h-full bg-base-200 p-10 flex flex-col gap-5">
  <h1 class="flex items-center gap-5">
    <div class="text-5xl flex gap-3">
      <div>Association</div>
      <div *ngIf="!edit">{{association.name}}</div>
      <input type="text" *ngIf="edit" placeholder="Name" class="input w-full" [formControl]="name">
    </div>
    <button class="btn btn-primary" (click)="changeEdit(true)" *ngIf="!edit">
      Edit
    </button>
    <button class="btn btn-ghost" (click)="changeEdit(false)" *ngIf="edit">
      Cancel
    </button>
    <button class="btn btn-secondary" (click)="submit()" *ngIf="edit">
      Submit
    </button>
  </h1>
  <div>
    <div>Members :</div>
    <table class="ml-4 table">
      <tbody>
      <tr *ngFor="let member of association.members">
        <td>{{member.email}}</td>
        <td>{{member.firstname}} {{member.name}}</td>
        <td>
          <div *ngIf="edit" >
            <button mat-icon-button (click)="removeUser(member.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
    <form *ngIf="edit" class="flex gap-3 mt-3" (ngSubmit)="addMember()" [formGroup]="newMember">
      <input type="text" class="input" formControlName="name" placeholder="Email">
      <button class="btn btn-primary" type="submit" [disabled]="newMember.status == 'DISABLED'">Ajouter un membre</button>
    </form>
    <div class="alert alert-error shadow-lg mt-2" *ngIf="error">Error : {{error}}</div>
  </div>
</div>
